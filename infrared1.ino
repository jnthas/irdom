#include "display7.h"
#include "ired.h"

uint16_t rawData[211] = {9134, 4412,  646, 1608,  612, 1642,  606, 508,  576, 560,  548, 566,  548, 564,  548, 1706,  546, 1706,  548, 566,  548, 564,  548, 564,  548, 564,  546, 566,  546, 566,  546, 566,  546, 566,  546, 566,  548, 566,  546, 566,  546, 566,  548, 566,  546, 1708,  546, 1708,  546, 1708,  546, 566,  546, 566,  546, 566,  546, 568,  546, 566,  546, 568,  544, 568,  546, 568,  544, 568,  546, 568,  546, 566,  542, 570,  522, 592,  522, 1732,  520, 590,  522, 590,  522, 592,  522, 590,  522, 592,  522, 592,  522, 592,  520, 592,  522, 592,  520, 592,  520, 592,  520, 592,  520, 592,  520, 592,  520, 592,  520, 592,  520, 1734,  520, 1734,  520, 594,  520, 594,  518, 594,  520, 594,  520, 592,  520, 594,  518, 594,  518, 594,  520, 592,  520, 594,  518, 596,  518, 594,  518, 594,  518, 594,  518, 594,  518, 594,  518, 596,  516, 596,  518, 618,  494, 594,  518, 618,  496, 618,  494, 618,  494, 620,  494, 618,  494, 620,  494, 620,  494, 618,  494, 620,  492, 620,  492, 620,  494, 620,  492, 1760,  494, 620,  492, 1762,  492, 620,  492, 620,  492, 620,  494, 620,  492, 620,  492, 620,  492, 622,  492, 620,  492, 1762,  492, 622,  492, 622,  490, 622,  488, 1768,  468};


unsigned long currentMillis = 0;
uint8_t count = 0;


const uint8_t programPin = 16;


void setup ()
{

  pinMode(programPin, INPUT);

  Display7::setup();
  IRed::setup();


}

void loop()
{

  if (digitalRead(programPin) == LOW) {
    
    Display7::writeDisplay(Display7::DisplayChars[2][0], Display7::DisplayChars[19][0]);

  } else {

    if (millis() - currentMillis > 1000) {
      
      if (count == 0) {
        Display7::writeDisplay(Display7::DisplayChars[1][0], Display7::DisplayChars[22][0]);
        count++;
      } else {
        Display7::writeDisplay(Display7::DisplayChars[23][0], Display7::DisplayChars[0][0]);
        count = 0;


        IRed::sendIR(rawData, 211);
      }
      
      
      currentMillis = millis();
    }


  }

  Display7::loop();
}



